/* Pitch dark theme */
:root { --bg:#000; --fg:#e5e7eb; --muted:#9aa0a6; --card:#0b0b0b; --border:#1b1b1b; --accent:#22d3ee; }

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin:0; background:var(--bg); color:var(--fg);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
  display:flex; flex-direction:column;
}
.hidden { display:none !important; }
.mt { margin-top: 10px; }
.muted { color: var(--muted); font-size: 12px; }
.code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; letter-spacing: 2px; font-weight: 800; }
.code.small { font-size: 12px; }

.topbar { position:sticky; top:0; z-index:100; display:flex; align-items:center; gap:12px; padding:12px 16px; border-bottom:1px solid var(--border); background:#040404; }
.topbar h1 { font-size:18px; margin:0; }
.grow { flex:1; }

button, input { padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#0d0d0d; color:var(--fg); }
button { cursor:pointer; transition: transform .02s ease; }
button:active { transform: translateY(1px); }
button.primary { background:var(--accent); color:#001018; border:none; font-weight:700; }
button.ghost { background:transparent; border:1px dashed #353535; color: var(--fg); }
button.small { padding:6px 10px; font-size:12px; }

.card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px; }
.row { display:flex; gap:8px; align-items:center; }
.col { display:flex; flex-direction:column; gap:10px; }

/* Main area takes remaining height; prevent page scroll */
.content { flex:1; min-height:0; padding:16px; display:flex; flex-direction:column; gap:10px; overflow:hidden; }

/* Chats dropdown — now FIXED and top-layer */
.dropdown {
  position: fixed;
  left: 16px;
  top: 64px;            /* sit under the header */
  z-index: 1000;        /* above everything */
  width: min(480px, 92vw);
}
@media (max-width: 700px) { .dropdown { left:8px; right:8px; width:auto; } }

/* Profile */
.mebox { display:flex; align-items:center; gap:8px; margin-right:8px; cursor:pointer; }
.avatar { border-radius:50%; border:1px solid var(--border); object-fit:cover; background:#111; }
.avatar.sm { width:28px; height:28px; }
.avatar.xl { width:256px; height:256px; display:block; margin:auto; border-radius:16px; }

/* Profile menu — FIXED and top-layer */
.menu {
  position: fixed;
  top: 64px;
  right: 16px;
  background:#0e0e0e; border:1px solid var(--border); border-radius:12px;
  padding:10px; display:flex; flex-direction:column; gap:8px; z-index: 1100; min-width:220px;
  box-shadow: 0 10px 30px rgba(0,0,0,.5);
}
.menu .menutitle { font-size:12px; color:var(--muted); }
.menu .menuitem.text { padding:0 2px; }
.menu .menuitem.text.muted { color:var(--muted); }
.menusep { height:1px; background:var(--border); margin:6px 0; }
.menu button { background:transparent; border:1px dashed #353535; color:var(--fg); padding:8px 10px; border-radius:10px; text-align:left; }
.menu button:hover { border-color:#4b4b4b; }

/* Chat shell layout */
.chat-shell { display:flex; flex-direction:column; gap:10px; flex:1; min-height:0; }
.chat-header { display:flex; align-items:center; justify-content:space-between; gap:10px; }
.roomname-wrap { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.roomname-input { background:#0d0d0d; color:var(--fg); border:1px solid var(--border); border-radius:10px; font-weight:700; font-size:16px; padding:8px 10px; min-width:220px; }
.roomcode-wrap { display:flex; align-items:center; gap:8px; }

/* Messages scroll ONLY */
#messages {
  flex: 1;
  min-height: 0;
  background: #050505;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  overflow-y: auto;              /* the only scroller */
  display: flex;
  flex-direction: column;
  gap: 10px;
  scroll-behavior: smooth;
}

/* Composer sticks to bottom of chat area */
.composer { position: sticky; bottom: 0; background: #040404; padding-top: 10px; }

/* Message rows */
.msgrow { display:flex; align-items:flex-end; gap:8px; }
.msgrow.right { justify-content: flex-end; }
.msgrow img.avatar { width:28px; height:28px; }
.bubble {
  max-width: 72%;
  align-self: flex-start;
  background: #121212;
  border: 1px solid #1f1f1f;
  border-radius: 14px;
  padding: 10px 12px;
  word-wrap: break-word;
}
.bubble .meta { font-size:11px; color:var(--muted); margin-bottom: 4px; }
.bubble .text { font-size:15px; color:#f1f5f9; }
.bubble.mine { align-self: flex-end; background: #0e2230; border: 1px solid #123446; }
.bubble.mine .meta, .bubble.mine .text { text-align: right; }

/* Overlays */
.overlay { position:fixed; inset:0; background:rgba(0,0,0,.75); display:grid; place-items:center; z-index:1200; }
.modal { width:min(92vw, 420px); }